
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    
    <form id="leadForm">
    <!-- <input type=hidden name="retURL" value="https://www.seekmedicare.com/s/thank-you"> -->

    <label for="first_name">First Name</label><input maxlength="40" name="first_name" size="20" type="text" /><br>
    <label for="last_name">Last Name</label><input maxlength="80" name="last_name" size="20" type="text" /><br>
    <label for="email">Email</label><input maxlength="80" name="email" size="20" type="text" /><br>
    <label for="zip">Zip</label><input maxlength="20" name="zip" size="20" type="text" /><br>
    
    <!-- <input type=hidden maxlength="255" name="utm_campaign" size="20" type="text" /><br>
    <input type=hidden maxlength="255" name="utm_content" size="20" type="text" /><br>
    <input type=hidden maxlength="255" name="utm_medium" size="20" type="text" /><br>
    <input type=hidden maxlength="255" name="utm_source" size="20" type="text" /><br> -->
</form>
<button onclick="submitform()">Submit</button>
</html>

<script>
    function submitform(){
        $.ajax({
            type: "POST",
            url: "https://epamdev-seekinsuranceservices.cs165.force.com/services/apexrest/SeekWTL",
            data: JSON.stringify(prepareRequestData()),
            success: function(){},
            dataType: "json",
            contentType : "application/json"
        }).always(function(data) {
            console.log(data);
            document.location.replace('https://www.seekmedicare.com/s/thank-you');
        });
    }

    function prepareRequestData() {
        var formData = getFormValues();
        var urlParams = getUrlParams();
        if (urlParams) {
            console.log('urlParams.utm_campaign: ' + urlParams.utm_campaign);
            formData.utm_campaign = urlParams.utm_campaign ? urlParams.utm_campaign : '';
            formData.utm_content = urlParams.utm_content ? urlParams.utm_content : '';
            formData.utm_medium = urlParams.utm_medium ? urlParams.utm_medium : '';
            formData.utm_source = urlParams.utm_source ? urlParams.utm_source : '';
        }
        console.log(formData);
        return formData;
    }

    function getFormValues() {
        var elements = document.getElementById("leadForm").elements;
        var obj ={};
        for(var i = 0 ; i < elements.length ; i++){
            var item = elements.item(i);
            obj[item.name] = item.value;
        }
        console.log(obj);
        return obj;
    }

    function getUrlParams() {
        var params = {};
        window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            params[key] = value;
        });
        console.log(params);
        return params;
    }

</script>